#!/bin/bash
set -e

ROOT=$(pwd)
while [ ! -d $ROOT/.git ]; do
  ROOT=$(dirname $ROOT)
done

<<<<<<< HEAD
MACHINE=`uname -m`
[ -z "$CC" ] && [ ! -z `which clang` ] && CC="clang"
[ -z "$CC" ] && [ ! -z `which gcc` ] && CC="gcc"
[ -z "$CC" ] && [ ! -z `which tcc` ] && CC="tcc"
[ -z "$CC" ] && [ ! -z `which cc` ] && CC="cc"
BIN_DIR="build-$MACHINE-$CC-Debug"
=======
[ -z $BUILD ] && BUILD=Debug ; export BUILD
>>>>>>> hotfix-3.4.1

if [ ! -e $ROOT/$BUILD ]; then
  echo "cannot find build directory $BUILD in $ROOT. did you run cmake-init?"
  exit
fi

$ROOT/$BUILD/eressea/test_eressea
cd $ROOT
[ -e eressea.ini ] || ln -sf conf/eressea.ini
<<<<<<< HEAD
$ROOT/$BIN_DIR/eressea/eressea -v0 scripts/run-tests.lua
$ROOT/$BIN_DIR/eressea/eressea -v0 scripts/run-tests-e2.lua
$ROOT/$BIN_DIR/eressea/eressea -v0 scripts/run-tests-e3.lua

=======
$ROOT/$BUILD/eressea/eressea -v0 sacripts/run-tests.lua
$ROOT/$BUILD/eressea/eressea -v0 scripts/run-tests-e3.lua
>>>>>>> hotfix-3.4.1
cd $OLDWPD
